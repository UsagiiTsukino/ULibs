<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ULibs - Đăng nhập</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Đăng nhâp sử dụng dịch vụ của ULibs - Thư viện số để tìm kiếm và mua những cuốn sách mà mình thích"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="../public/img/logo/logo.jpg" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css" integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../../css/login.css" />
    <script>
      window.fbAsyncInit = function () {
        FB.init({
          appId: "378641464423407",
          autoLogAppEvents: true,
          xfbml: true,
          version: "v14.0",
        });
      };
    </script>
    <script
      async
      defer
      crossorigin="anonymous"
      src="https://connect.facebook.net/en_US/sdk.js"
    ></script>
    <script>
      if (document.location.search.match(/type=embed/gi)) {
        window.parent.postMessage("resize", "*");
      }
    </script>
    <script
      async
      defer
      crossorigin="anonymous"
      src="https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v14.0&appId=378641464423407&autoLogAppEvents=1"
      nonce="ocCsmxsf"
    ></script>
  </head>

  <body>
     <div class="form-section">
      <div class="row" style="height: -webkit-fill-available;">
        <div class="col-md-6 col-xs-12">
          <div class="login-form">
            <div class="section">
              <div class="section-header">
                <div class="logo">
                  <img src="../../img/logo/logo-removebg-preview.png" alt="" class="logo-img">
                </div>
                <div class="login-title">
                  <h5>Đăng nhập</h5>
                </div>
              </div>
              <div class="text-field-form">
                <div class="material-textfield">
                  <input placeholder=" " type="text" id="username" name="username">
                  <label>Tên đăng nhập</label>
                </div>
                <div class="material-textfield">
                  <input placeholder=" " type="email" id="email" name="email">
                  <label>Email</label>
                </div>
                <div class="material-textfield">
                  <input placeholder=" " type="password" id="password" name="password">
                  <label>Mật khẩu</label>
                </div>
                <div class="alert">Tài khoản hoặc mật khẩu sai. Vui lòng thử lại</div>
              </div>
              <div class="submit-section">
                  <button class="mobile-button mobile-button__submit" title="Đăng nhập" onclick="login()">
                    <i class="fa-solid fa-arrow-right"></i>
                  </button>
              </div>
              <div style="margin-top: 16px;">
                <div style="width: 100%; height: 12px; border-bottom: 1px solid #ccc; text-align: center">
                  <span style="font-size: 16px; background-color: #fff; padding: 0 10px;">
                    Hoặc 
                  </span>
                </div>
              </div>
              <div class="social-media">
                <div class="rounded-social-buttons">
                  <a class="circle-button facebook" href="/auth/facebook"></a>
                </div>
              </div>
              <div class="login-option">
                <div class="option">
                  <div class="to-register">
                    <a href="./register">Đăng kí thành viên</a>
                  </div>
                </div>
                <div class="option">
                  <div class="to-forgot-password">
                    <a href="./forgetPassword">Không thể đăng nhập ?</a>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
        <div class="col-md-6" style="height: 100%;">
          <div class="login-banner">

              <div id="slideshow">
                <div>
                  <img src="../../img/slide/login-slide-1.webp" alt="BRNbF_tN6BFwMnptSzlO.png" class="login-slider-img"/>
                </div>
                <div>
                  <img src="../../img/slide/login-slide-2.png" alt="" class="login-slider-img">
                </div>
                <div>
                  <img src="../../img/slide/login-slide-3.png" alt="" class="login-slider-img">
                </div>
                <div>
                  <img src="../../img/slide/login-slide-4.png" alt="" class="login-slider-img">
                </div>
                <div>
                  <img src="../../img/slide/login-slide-5.png" alt="" class="login-slider-img">
                </div>
            </div>
          </div>
        </div>
      </div>
    </div> 
    </div>

    <!--End login form-->
    
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script id="rendered-js">
      //this function to applay your animate style
      function animate_Me(target, moveMe) {
        $(target).focus(function () {
          $(moveMe).animate({ marginLeft: "266px" });
        });
        $(target).focusout(function () {
          $(moveMe).animate({ marginLeft: "24px" });
        });
      }
      //--------------------

      animate_Me("input[type='text']", ".fa-user");
      animate_Me("input[placeholder='Your Last Name']", ".fa-user-plus");
      animate_Me("input[type='email']", ".fa-envelope");
      animate_Me("input[type='password']", ".fa-lock");
      animate_Me("input[placeholder='Confirm Password']", ".fa-refresh");
    </script>
    <script>
      localStorage.removeItem("userData");
      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
        let expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }
      function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(";");
        for (let i = 0; i < ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == " ") {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }
      $(".form > p > a.site-name").text(location.origin);
      function login() {
        $.ajax({
          url: "/login",
          type: "POST",
          data: {
            username: $("#username").val(),
            email: $("#email").val(),
            password: $("#password").val(),
          },
        })
          .then((data) => {
            if (data.success) {
              setCookie("token", data.token, 1);
              window.location.pathname = "/";
            } else {
              $(".alert").css("visibility", "visible");
            }
          })
          .catch((err) => console.log(err));
      }
      $("#slideshow > div:gt(0)").hide();

      setInterval(function() {
        $('#slideshow > div:first')
          .fadeOut(1000)
          .next()
          .fadeIn(1000)
          .end()
          .appendTo('#slideshow');
      }, 3000);
    </script>
  </body>
</html>
